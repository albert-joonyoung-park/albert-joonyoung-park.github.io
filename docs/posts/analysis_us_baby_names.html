<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2023-10-26">
<meta name="description" content="Learning notes - Python for Data Analysis, 3E - Wes McKinney">

<title>Albert Joonyoung Park - US Baby Names 1880-2022</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Albert Joonyoung Park</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html" rel="" target="">
 <span class="menu-text">HOME</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../projects.html" rel="" target="">
 <span class="menu-text">PROJECTS</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../blog.html" rel="" target="">
 <span class="menu-text">BLOG</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../about.html" rel="" target="">
 <span class="menu-text">ABOUT</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
    <a href="https://github.com/albert-joonyoung-park" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-github"></i></a>
    <a href="" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-linkedin"></i></a>
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#us-baby-names-1880-2022" id="toc-us-baby-names-1880-2022" class="nav-link active" data-scroll-target="#us-baby-names-1880-2022">US Baby Names 1880-2022</a>
  <ul class="collapse">
  <li><a href="#check-downloaded-data-source-files" id="toc-check-downloaded-data-source-files" class="nav-link" data-scroll-target="#check-downloaded-data-source-files">1. Check downloaded data source files</a></li>
  <li><a href="#import-data-files" id="toc-import-data-files" class="nav-link" data-scroll-target="#import-data-files">2. Import data files</a></li>
  <li><a href="#analysis" id="toc-analysis" class="nav-link" data-scroll-target="#analysis">3. Analysis</a>
  <ul class="collapse">
  <li><a href="#total-number-of-births-from-one-data-file" id="toc-total-number-of-births-from-one-data-file" class="nav-link" data-scroll-target="#total-number-of-births-from-one-data-file">3.1 Total number of births from one data file</a></li>
  <li><a href="#consolidate-all-data-files" id="toc-consolidate-all-data-files" class="nav-link" data-scroll-target="#consolidate-all-data-files">3.2 Consolidate all data files</a></li>
  <li><a href="#data-aggregation-total-births-by-sex-and-year" id="toc-data-aggregation-total-births-by-sex-and-year" class="nav-link" data-scroll-target="#data-aggregation-total-births-by-sex-and-year">3.3 Data aggregation: total births by sex and year</a></li>
  <li><a href="#process-data--" id="toc-process-data--" class="nav-link" data-scroll-target="#process-data--">3.4 Process data -</a></li>
  <li><a href="#analysis---top-1000-names-for-each-sexyear-combination" id="toc-analysis---top-1000-names-for-each-sexyear-combination" class="nav-link" data-scroll-target="#analysis---top-1000-names-for-each-sexyear-combination">Analysis - Top 1000 names for each sex/year combination</a></li>
  <li><a href="#analysis---naming-trends" id="toc-analysis---naming-trends" class="nav-link" data-scroll-target="#analysis---naming-trends">Analysis - Naming Trends</a></li>
  <li><a href="#analysis---measure-the-increase-in-naming-diversity" id="toc-analysis---measure-the-increase-in-naming-diversity" class="nav-link" data-scroll-target="#analysis---measure-the-increase-in-naming-diversity">Analysis - Measure the increase in naming diversity</a></li>
  <li><a href="#analysis---number-of-distinct-names-by-popularity-in-the-top-50-of-births" id="toc-analysis---number-of-distinct-names-by-popularity-in-the-top-50-of-births" class="nav-link" data-scroll-target="#analysis---number-of-distinct-names-by-popularity-in-the-top-50-of-births">Analysis - Number of distinct names, by popularity in the top 50% of births</a></li>
  <li><a href="#analysis---the-last-letter-revolution" id="toc-analysis---the-last-letter-revolution" class="nav-link" data-scroll-target="#analysis---the-last-letter-revolution">Analysis - The “last letter” revolution</a></li>
  <li><a href="#analysis---boy-names-that-became-girl-names-and-vice-versa" id="toc-analysis---boy-names-that-became-girl-names-and-vice-versa" class="nav-link" data-scroll-target="#analysis---boy-names-that-became-girl-names-and-vice-versa">Analysis - Boy names that became girl names (and vice versa)</a></li>
  <li><a href="#data-normalization" id="toc-data-normalization" class="nav-link" data-scroll-target="#data-normalization">Data Normalization</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">US Baby Names 1880-2022</h1>
<p class="subtitle lead">Analysis techniques using pandas - Python for Data Analysis, 3E by Wes McKinney</p>
  <div class="quarto-categories">
    <div class="quarto-category">Python</div>
    <div class="quarto-category">pandas</div>
    <div class="quarto-category">analaysis</div>
    <div class="quarto-category">MovieLens</div>
  </div>
  </div>

<div>
  <div class="description">
    Learning notes - Python for Data Analysis, 3E - Wes McKinney
  </div>
</div>


<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">October 26, 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<hr>
<section id="us-baby-names-1880-2022" class="level1">
<h1>US Baby Names 1880-2022</h1>
<p>Data source: The United States Social Security Administration (SSA)</p>
<p>Visualize the proportion of babies given a particular name over time</p>
<p>Determine the relative rank of a name</p>
<p>Determine the most popular names in each year or the names whose poularity has advanced or declined the most</p>
<p>Analyze trends in namesL vowels, consonants, length, overall diveristy, changes in spelling, first and last letters</p>
<p>Analyze external sources of trends: biblical names, celebrities, demographics</p>
<section id="check-downloaded-data-source-files" class="level2">
<h2 class="anchored" data-anchor-id="check-downloaded-data-source-files">1. Check downloaded data source files</h2>
<div class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Display directories and files for the downloaded data files</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Path to inspect</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>directory_path <span class="op">=</span> <span class="st">"../data/babynames"</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="co"># List all items in the path, print</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>items <span class="op">=</span> os.listdir(directory_path)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> item <span class="kw">in</span> items:</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>  item_path <span class="op">=</span> os.path.join(directory_path, item)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> os.path.isdir(item_path):</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"[DIR] </span><span class="sc">{</span>item<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>  <span class="cf">else</span>:</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(item)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>names.zip
yob1880.txt
yob1881.txt
yob1882.txt
yob1883.txt
yob1884.txt
yob1885.txt
yob1886.txt
yob1887.txt
yob1888.txt
yob1889.txt
yob1890.txt
yob1891.txt
yob1892.txt
yob1893.txt
yob1894.txt
yob1895.txt
yob1896.txt
yob1897.txt
yob1898.txt
yob1899.txt
yob1900.txt
yob1901.txt
yob1902.txt
yob1903.txt
yob1904.txt
yob1905.txt
yob1906.txt
yob1907.txt
yob1908.txt
yob1909.txt
yob1910.txt
yob1911.txt
yob1912.txt
yob1913.txt
yob1914.txt
yob1915.txt
yob1916.txt
yob1917.txt
yob1918.txt
yob1919.txt
yob1920.txt
yob1921.txt
yob1922.txt
yob1923.txt
yob1924.txt
yob1925.txt
yob1926.txt
yob1927.txt
yob1928.txt
yob1929.txt
yob1930.txt
yob1931.txt
yob1932.txt
yob1933.txt
yob1934.txt
yob1935.txt
yob1936.txt
yob1937.txt
yob1938.txt
yob1939.txt
yob1940.txt
yob1941.txt
yob1942.txt
yob1943.txt
yob1944.txt
yob1945.txt
yob1946.txt
yob1947.txt
yob1948.txt
yob1949.txt
yob1950.txt
yob1951.txt
yob1952.txt
yob1953.txt
yob1954.txt
yob1955.txt
yob1956.txt
yob1957.txt
yob1958.txt
yob1959.txt
yob1960.txt
yob1961.txt
yob1962.txt
yob1963.txt
yob1964.txt
yob1965.txt
yob1966.txt
yob1967.txt
yob1968.txt
yob1969.txt
yob1970.txt
yob1971.txt
yob1972.txt
yob1973.txt
yob1974.txt
yob1975.txt
yob1976.txt
yob1977.txt
yob1978.txt
yob1979.txt
yob1980.txt
yob1981.txt
yob1982.txt
yob1983.txt
yob1984.txt
yob1985.txt
yob1986.txt
yob1987.txt
yob1988.txt
yob1989.txt
yob1990.txt
yob1991.txt
yob1992.txt
yob1993.txt
yob1994.txt
yob1995.txt
yob1996.txt
yob1997.txt
yob1998.txt
yob1999.txt
yob2000.txt
yob2001.txt
yob2002.txt
yob2003.txt
yob2004.txt
yob2005.txt
yob2006.txt
yob2007.txt
yob2008.txt
yob2009.txt
yob2010.txt
yob2011.txt
yob2012.txt
yob2013.txt
yob2014.txt
yob2015.txt
yob2016.txt
yob2017.txt
yob2018.txt
yob2019.txt
yob2020.txt
yob2021.txt
yob2022.txt</code></pre>
</div>
</div>
</section>
<section id="import-data-files" class="level2">
<h2 class="anchored" data-anchor-id="import-data-files">2. Import data files</h2>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Straight import</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>directory_path <span class="op">=</span> <span class="st">"../data/babynames"</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>item <span class="op">=</span> <span class="st">"yob1880.txt"</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>data_source <span class="op">=</span> os.path.join(directory_path, item)</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>names1880 <span class="op">=</span> pd.read_csv(data_source,</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>                        names<span class="op">=</span>[<span class="st">"name"</span>, <span class="st">"sex"</span>,<span class="st">"births"</span>])</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>names1880.info()</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>names1880.describe()</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>names1880</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 2000 entries, 0 to 1999
Data columns (total 3 columns):
 #   Column  Non-Null Count  Dtype 
---  ------  --------------  ----- 
 0   name    2000 non-null   object
 1   sex     2000 non-null   object
 2   births  2000 non-null   int64 
dtypes: int64(1), object(2)
memory usage: 47.0+ KB</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="2">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">name</th>
<th data-quarto-table-cell-role="th">sex</th>
<th data-quarto-table-cell-role="th">births</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Mary</td>
<td>F</td>
<td>7065</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Anna</td>
<td>F</td>
<td>2604</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Emma</td>
<td>F</td>
<td>2003</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Elizabeth</td>
<td>F</td>
<td>1939</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>Minnie</td>
<td>F</td>
<td>1746</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1995</td>
<td>Woodie</td>
<td>M</td>
<td>5</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1996</td>
<td>Worthy</td>
<td>M</td>
<td>5</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1997</td>
<td>Wright</td>
<td>M</td>
<td>5</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1998</td>
<td>York</td>
<td>M</td>
<td>5</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1999</td>
<td>Zachariah</td>
<td>M</td>
<td>5</td>
</tr>
</tbody>
</table>

<p>2000 rows × 3 columns</p>
</div>
</div>
</div>
</section>
<section id="analysis" class="level2">
<h2 class="anchored" data-anchor-id="analysis">3. Analysis</h2>
<section id="total-number-of-births-from-one-data-file" class="level3">
<h3 class="anchored" data-anchor-id="total-number-of-births-from-one-data-file">3.1 Total number of births from one data file</h3>
<div class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get total number of births for the year</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="co"># - Sum of the births column by sex</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>names1880.groupby(<span class="st">"sex"</span>)[<span class="st">"births"</span>].<span class="bu">sum</span>()  <span class="co"># total births per sex</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>names1880[<span class="st">"births"</span>].<span class="bu">sum</span>() <span class="co"># total births</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="3">
<pre><code>201484</code></pre>
</div>
</div>
</section>
<section id="consolidate-all-data-files" class="level3">
<h3 class="anchored" data-anchor-id="consolidate-all-data-files">3.2 Consolidate all data files</h3>
<div class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="co"># yearly data file ending with year number, year 1880 - 2022</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>pieces <span class="op">=</span> []</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>directory_path <span class="op">=</span> <span class="st">"../data/babynames"</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> year <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1880</span>, <span class="dv">2023</span>):</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Set up file path and name</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>  path <span class="op">=</span> <span class="ss">f"</span><span class="sc">{</span>directory_path<span class="sc">}</span><span class="ss">/yob</span><span class="sc">{</span>year<span class="sc">}</span><span class="ss">.txt"</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>  frame <span class="op">=</span> pd.read_csv(path, names<span class="op">=</span>[<span class="st">"name"</span>, <span class="st">"sex"</span>, <span class="st">"births"</span>])</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add a column for the year</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>  frame[<span class="st">"year"</span>] <span class="op">=</span> year</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>  pieces.append(frame)</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Concatenate each DataFrame into a single DataFrame</span></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>names <span class="op">=</span> pd.concat(pieces, ignore_index<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>names  <span class="co"># [2085158 rows x 4 columns]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="4">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">name</th>
<th data-quarto-table-cell-role="th">sex</th>
<th data-quarto-table-cell-role="th">births</th>
<th data-quarto-table-cell-role="th">year</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Mary</td>
<td>F</td>
<td>7065</td>
<td>1880</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Anna</td>
<td>F</td>
<td>2604</td>
<td>1880</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Emma</td>
<td>F</td>
<td>2003</td>
<td>1880</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Elizabeth</td>
<td>F</td>
<td>1939</td>
<td>1880</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>Minnie</td>
<td>F</td>
<td>1746</td>
<td>1880</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2085153</td>
<td>Zuberi</td>
<td>M</td>
<td>5</td>
<td>2022</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2085154</td>
<td>Zydn</td>
<td>M</td>
<td>5</td>
<td>2022</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2085155</td>
<td>Zylon</td>
<td>M</td>
<td>5</td>
<td>2022</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2085156</td>
<td>Zymeer</td>
<td>M</td>
<td>5</td>
<td>2022</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2085157</td>
<td>Zymeire</td>
<td>M</td>
<td>5</td>
<td>2022</td>
</tr>
</tbody>
</table>

<p>2085158 rows × 4 columns</p>
</div>
</div>
</div>
</section>
<section id="data-aggregation-total-births-by-sex-and-year" class="level3">
<h3 class="anchored" data-anchor-id="data-aggregation-total-births-by-sex-and-year">3.3 Data aggregation: total births by sex and year</h3>
<div class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Aggregation using groupby() or pivot_table()</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="co"># total births</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>total_births <span class="op">=</span> names.pivot_table(<span class="st">"births"</span>, index<span class="op">=</span><span class="st">"year"</span>, columns<span class="op">=</span><span class="st">"sex"</span>, aggfunc<span class="op">=</span><span class="bu">sum</span>)</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>total_births.tail() <span class="co"># total births per sex for the last 5 years</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot Total Births</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>total_births.plot(title<span class="op">=</span><span class="st">"Total births by sex and year"</span>)</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="analysis_us_baby_names_files/figure-html/cell-6-output-1.png" width="571" height="449"></p>
</div>
</div>
</section>
<section id="process-data--" class="level3">
<h3 class="anchored" data-anchor-id="process-data--">3.4 Process data -</h3>
<div class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Insert a new column 'prop' with fraction of babies given each name relative to the total number of births</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="co"># - Insert to each group of year and sex</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> add_prop(group):</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  <span class="co">"""</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="co">  print("Processing group......")</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="co">  print(group)</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="co">  print("group[</span><span class="ch">\"</span><span class="co">births</span><span class="ch">\"</span><span class="co">] is.....")</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="co">  print(group["births"])</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="co">  print("Total births per group: group[</span><span class="ch">\"</span><span class="co">births</span><span class="ch">\"</span><span class="co">].sum() is......")</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a><span class="co">  print(group["births"].sum())</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a><span class="co">  """</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>  group[<span class="st">"prop"</span>] <span class="op">=</span> group[<span class="st">"births"</span>] <span class="op">/</span> group[<span class="st">"births"</span>].<span class="bu">sum</span>()  <span class="co"># Seroes / scalar</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> group</span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>names</span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"---------------------------------"</span>)</span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Update names data frame with a calculated column of proportion..."</span>)</span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>names <span class="op">=</span> names.groupby([<span class="st">"year"</span>, <span class="st">"sex"</span>], group_keys<span class="op">=</span><span class="va">False</span>).<span class="bu">apply</span>(add_prop)</span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"---------------------------------"</span>)</span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>names</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>---------------------------------
Update names data frame with a calculated column of proportion...
---------------------------------</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="6">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">name</th>
<th data-quarto-table-cell-role="th">sex</th>
<th data-quarto-table-cell-role="th">births</th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">prop</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Mary</td>
<td>F</td>
<td>7065</td>
<td>1880</td>
<td>0.077642</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Anna</td>
<td>F</td>
<td>2604</td>
<td>1880</td>
<td>0.028617</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Emma</td>
<td>F</td>
<td>2003</td>
<td>1880</td>
<td>0.022012</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Elizabeth</td>
<td>F</td>
<td>1939</td>
<td>1880</td>
<td>0.021309</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>Minnie</td>
<td>F</td>
<td>1746</td>
<td>1880</td>
<td>0.019188</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2085153</td>
<td>Zuberi</td>
<td>M</td>
<td>5</td>
<td>2022</td>
<td>0.000003</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2085154</td>
<td>Zydn</td>
<td>M</td>
<td>5</td>
<td>2022</td>
<td>0.000003</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2085155</td>
<td>Zylon</td>
<td>M</td>
<td>5</td>
<td>2022</td>
<td>0.000003</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2085156</td>
<td>Zymeer</td>
<td>M</td>
<td>5</td>
<td>2022</td>
<td>0.000003</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2085157</td>
<td>Zymeire</td>
<td>M</td>
<td>5</td>
<td>2022</td>
<td>0.000003</td>
</tr>
</tbody>
</table>

<p>2085158 rows × 5 columns</p>
</div>
</div>
</div>
<div class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Sanity check, Prop in each group must add up to 1.</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>names.groupby([<span class="st">"year"</span>, <span class="st">"sex"</span>])[<span class="st">"prop"</span>].<span class="bu">sum</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="7">
<pre><code>year  sex
1880  F      1.0
      M      1.0
1881  F      1.0
      M      1.0
1882  F      1.0
            ... 
2020  M      1.0
2021  F      1.0
      M      1.0
2022  F      1.0
      M      1.0
Name: prop, Length: 286, dtype: float64</code></pre>
</div>
</div>
</section>
<section id="analysis---top-1000-names-for-each-sexyear-combination" class="level3">
<h3 class="anchored" data-anchor-id="analysis---top-1000-names-for-each-sexyear-combination">Analysis - Top 1000 names for each sex/year combination</h3>
<div class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Another group operation for top 1000 names</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_top1000(group):</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> group.sort_values(<span class="st">"births"</span>, ascending<span class="op">=</span><span class="va">False</span>)[:<span class="dv">1000</span>]</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>grouped <span class="op">=</span> names.groupby([<span class="st">"year"</span>,<span class="st">"sex"</span>])</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>top1000 <span class="op">=</span> grouped.<span class="bu">apply</span>(get_top1000)</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>top1000.head(<span class="dv">12</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="8">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">name</th>
<th data-quarto-table-cell-role="th">sex</th>
<th data-quarto-table-cell-role="th">births</th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">prop</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">sex</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td rowspan="12" data-quarto-table-cell-role="th" data-valign="top">1880</td>
<td rowspan="12" data-quarto-table-cell-role="th" data-valign="top">F</td>
<td data-quarto-table-cell-role="th">0</td>
<td>Mary</td>
<td>F</td>
<td>7065</td>
<td>1880</td>
<td>0.077642</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Anna</td>
<td>F</td>
<td>2604</td>
<td>1880</td>
<td>0.028617</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Emma</td>
<td>F</td>
<td>2003</td>
<td>1880</td>
<td>0.022012</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Elizabeth</td>
<td>F</td>
<td>1939</td>
<td>1880</td>
<td>0.021309</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>Minnie</td>
<td>F</td>
<td>1746</td>
<td>1880</td>
<td>0.019188</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>Margaret</td>
<td>F</td>
<td>1578</td>
<td>1880</td>
<td>0.017342</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>Ida</td>
<td>F</td>
<td>1472</td>
<td>1880</td>
<td>0.016177</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>Alice</td>
<td>F</td>
<td>1414</td>
<td>1880</td>
<td>0.015539</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8</td>
<td>Bertha</td>
<td>F</td>
<td>1320</td>
<td>1880</td>
<td>0.014506</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">9</td>
<td>Sarah</td>
<td>F</td>
<td>1288</td>
<td>1880</td>
<td>0.014155</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">10</td>
<td>Annie</td>
<td>F</td>
<td>1258</td>
<td>1880</td>
<td>0.013825</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">11</td>
<td>Clara</td>
<td>F</td>
<td>1226</td>
<td>1880</td>
<td>0.013473</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># top1000 dataset does not need the group index</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>top1000 <span class="op">=</span> top1000.reset_index(drop<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>top1000.head(<span class="dv">12</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="9">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">name</th>
<th data-quarto-table-cell-role="th">sex</th>
<th data-quarto-table-cell-role="th">births</th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">prop</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Mary</td>
<td>F</td>
<td>7065</td>
<td>1880</td>
<td>0.077642</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Anna</td>
<td>F</td>
<td>2604</td>
<td>1880</td>
<td>0.028617</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Emma</td>
<td>F</td>
<td>2003</td>
<td>1880</td>
<td>0.022012</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Elizabeth</td>
<td>F</td>
<td>1939</td>
<td>1880</td>
<td>0.021309</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>Minnie</td>
<td>F</td>
<td>1746</td>
<td>1880</td>
<td>0.019188</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>Margaret</td>
<td>F</td>
<td>1578</td>
<td>1880</td>
<td>0.017342</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>Ida</td>
<td>F</td>
<td>1472</td>
<td>1880</td>
<td>0.016177</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>Alice</td>
<td>F</td>
<td>1414</td>
<td>1880</td>
<td>0.015539</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8</td>
<td>Bertha</td>
<td>F</td>
<td>1320</td>
<td>1880</td>
<td>0.014506</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">9</td>
<td>Sarah</td>
<td>F</td>
<td>1288</td>
<td>1880</td>
<td>0.014155</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">10</td>
<td>Annie</td>
<td>F</td>
<td>1258</td>
<td>1880</td>
<td>0.013825</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">11</td>
<td>Clara</td>
<td>F</td>
<td>1226</td>
<td>1880</td>
<td>0.013473</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="analysis---naming-trends" class="level3">
<h3 class="anchored" data-anchor-id="analysis---naming-trends">Analysis - Naming Trends</h3>
<div class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Split top1000 into boy and girl portion</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>boys <span class="op">=</span> top1000[top1000[<span class="st">"sex"</span>] <span class="op">==</span> <span class="st">"M"</span>]</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>girls <span class="op">=</span> top1000[top1000[<span class="st">"sex"</span>] <span class="op">==</span> <span class="st">"F"</span>]</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>boys</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>girls</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="10">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">name</th>
<th data-quarto-table-cell-role="th">sex</th>
<th data-quarto-table-cell-role="th">births</th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">prop</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Mary</td>
<td>F</td>
<td>7065</td>
<td>1880</td>
<td>0.077642</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Anna</td>
<td>F</td>
<td>2604</td>
<td>1880</td>
<td>0.028617</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Emma</td>
<td>F</td>
<td>2003</td>
<td>1880</td>
<td>0.022012</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Elizabeth</td>
<td>F</td>
<td>1939</td>
<td>1880</td>
<td>0.021309</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>Minnie</td>
<td>F</td>
<td>1746</td>
<td>1880</td>
<td>0.019188</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">284871</td>
<td>Luella</td>
<td>F</td>
<td>262</td>
<td>2022</td>
<td>0.000161</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">284872</td>
<td>Nancy</td>
<td>F</td>
<td>262</td>
<td>2022</td>
<td>0.000161</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">284873</td>
<td>Cielo</td>
<td>F</td>
<td>261</td>
<td>2022</td>
<td>0.000160</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">284874</td>
<td>Madalyn</td>
<td>F</td>
<td>261</td>
<td>2022</td>
<td>0.000160</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">284875</td>
<td>Kahlani</td>
<td>F</td>
<td>260</td>
<td>2022</td>
<td>0.000160</td>
</tr>
</tbody>
</table>

<p>142880 rows × 5 columns</p>
</div>
</div>
</div>
<div class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Simple time serires for names</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Pivot table</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>total_births <span class="op">=</span> top1000.pivot_table(<span class="st">"births"</span>, index<span class="op">=</span><span class="st">"year"</span>, columns<span class="op">=</span><span class="st">"name"</span>, aggfunc<span class="op">=</span><span class="bu">sum</span>)</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>total_births</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="11">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th">name</th>
<th data-quarto-table-cell-role="th">Aaden</th>
<th data-quarto-table-cell-role="th">Aadhya</th>
<th data-quarto-table-cell-role="th">Aaliyah</th>
<th data-quarto-table-cell-role="th">Aanya</th>
<th data-quarto-table-cell-role="th">Aarav</th>
<th data-quarto-table-cell-role="th">Aarna</th>
<th data-quarto-table-cell-role="th">Aaron</th>
<th data-quarto-table-cell-role="th">Aarush</th>
<th data-quarto-table-cell-role="th">Aarya</th>
<th data-quarto-table-cell-role="th">Aayan</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">Zola</th>
<th data-quarto-table-cell-role="th">Zollie</th>
<th data-quarto-table-cell-role="th">Zona</th>
<th data-quarto-table-cell-role="th">Zora</th>
<th data-quarto-table-cell-role="th">Zoya</th>
<th data-quarto-table-cell-role="th">Zula</th>
<th data-quarto-table-cell-role="th">Zuri</th>
<th data-quarto-table-cell-role="th">Zyair</th>
<th data-quarto-table-cell-role="th">Zyaire</th>
<th data-quarto-table-cell-role="th">Zyon</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1880</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>102.0</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>...</td>
<td>7.0</td>
<td>NaN</td>
<td>8.0</td>
<td>28.0</td>
<td>NaN</td>
<td>27.0</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1881</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>94.0</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>...</td>
<td>10.0</td>
<td>NaN</td>
<td>9.0</td>
<td>21.0</td>
<td>NaN</td>
<td>27.0</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1882</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>85.0</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>...</td>
<td>9.0</td>
<td>NaN</td>
<td>17.0</td>
<td>32.0</td>
<td>NaN</td>
<td>21.0</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1883</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>105.0</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>...</td>
<td>10.0</td>
<td>NaN</td>
<td>11.0</td>
<td>35.0</td>
<td>NaN</td>
<td>25.0</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1884</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>97.0</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>...</td>
<td>14.0</td>
<td>6.0</td>
<td>8.0</td>
<td>58.0</td>
<td>NaN</td>
<td>27.0</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2018</td>
<td>NaN</td>
<td>NaN</td>
<td>3836.0</td>
<td>NaN</td>
<td>488.0</td>
<td>NaN</td>
<td>5986.0</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>...</td>
<td>277.0</td>
<td>NaN</td>
<td>NaN</td>
<td>269.0</td>
<td>NaN</td>
<td>NaN</td>
<td>1131.0</td>
<td>NaN</td>
<td>323.0</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2019</td>
<td>NaN</td>
<td>NaN</td>
<td>3661.0</td>
<td>NaN</td>
<td>419.0</td>
<td>NaN</td>
<td>5534.0</td>
<td>NaN</td>
<td>NaN</td>
<td>209.0</td>
<td>...</td>
<td>266.0</td>
<td>NaN</td>
<td>NaN</td>
<td>353.0</td>
<td>NaN</td>
<td>NaN</td>
<td>1181.0</td>
<td>NaN</td>
<td>540.0</td>
<td>213.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2020</td>
<td>NaN</td>
<td>NaN</td>
<td>3572.0</td>
<td>NaN</td>
<td>418.0</td>
<td>NaN</td>
<td>5087.0</td>
<td>NaN</td>
<td>256.0</td>
<td>NaN</td>
<td>...</td>
<td>274.0</td>
<td>NaN</td>
<td>NaN</td>
<td>308.0</td>
<td>282.0</td>
<td>NaN</td>
<td>1264.0</td>
<td>225.0</td>
<td>668.0</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2021</td>
<td>NaN</td>
<td>NaN</td>
<td>3603.0</td>
<td>NaN</td>
<td>431.0</td>
<td>268.0</td>
<td>4843.0</td>
<td>NaN</td>
<td>255.0</td>
<td>NaN</td>
<td>...</td>
<td>262.0</td>
<td>NaN</td>
<td>NaN</td>
<td>337.0</td>
<td>267.0</td>
<td>NaN</td>
<td>1435.0</td>
<td>324.0</td>
<td>830.0</td>
<td>242.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2022</td>
<td>NaN</td>
<td>268.0</td>
<td>3270.0</td>
<td>NaN</td>
<td>406.0</td>
<td>NaN</td>
<td>4496.0</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>...</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>330.0</td>
<td>358.0</td>
<td>NaN</td>
<td>1513.0</td>
<td>352.0</td>
<td>867.0</td>
<td>275.0</td>
</tr>
</tbody>
</table>

<p>143 rows × 7322 columns</p>
</div>
</div>
</div>
<div class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># plot the pivot table for a few names</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>total_births.info()</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>subset <span class="op">=</span> total_births[[<span class="st">"John"</span>, <span class="st">"Harry"</span>, <span class="st">"Mary"</span>, <span class="st">"Marilyn"</span>]]</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>subset.plot(subplots<span class="op">=</span><span class="va">True</span>, figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">10</span>), title<span class="op">=</span><span class="st">"Number of births per year"</span>)</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
Int64Index: 143 entries, 1880 to 2022
Columns: 7322 entries, Aaden to Zyon
dtypes: float64(7322)
memory usage: 8.0 MB</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="analysis_us_baby_names_files/figure-html/cell-13-output-2.png" width="964" height="895"></p>
</div>
</div>
</section>
<section id="analysis---measure-the-increase-in-naming-diversity" class="level3">
<h3 class="anchored" data-anchor-id="analysis---measure-the-increase-in-naming-diversity">Analysis - Measure the increase in naming diversity</h3>
<p>The decrease in plots above is that fewer parents are choosing the common names for their children. Explore and confirm in the data for this hypothesis. - Proportion of births represented by the top 1000 most popular names by year and sex</p>
<div class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>table <span class="op">=</span> top1000.pivot_table(<span class="st">"prop"</span>, index<span class="op">=</span><span class="st">"year"</span>, columns<span class="op">=</span><span class="st">"sex"</span>, aggfunc<span class="op">=</span><span class="bu">sum</span>)</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>table</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>ax <span class="op">=</span> table.plot(title<span class="op">=</span><span class="st">"Sum of table1000.prop by year and sex"</span>, yticks<span class="op">=</span>np.linspace(<span class="dv">0</span>, <span class="fl">1.2</span>, <span class="dv">13</span>))</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>description <span class="op">=</span> <span class="st">"Proportion of births represented in top one thousand names by sex"</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>fig.text(<span class="fl">0.1</span>, <span class="fl">0.01</span>, description, fontsize<span class="op">=</span><span class="dv">10</span>, ha<span class="op">=</span><span class="st">"left"</span>)</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="analysis_us_baby_names_files/figure-html/cell-14-output-1.png" width="581" height="445"></p>
</div>
<div class="cell-output cell-output-display">
<p><img src="analysis_us_baby_names_files/figure-html/cell-14-output-2.png" width="571" height="449"></p>
</div>
</div>
<blockquote class="blockquote">
<p>Indeed, there is a noticeable trend of rising diversity in names, accompanied by a declining overall proprtion within the top one thousand.</p>
</blockquote>
</section>
<section id="analysis---number-of-distinct-names-by-popularity-in-the-top-50-of-births" class="level3">
<h3 class="anchored" data-anchor-id="analysis---number-of-distinct-names-by-popularity-in-the-top-50-of-births">Analysis - Number of distinct names, by popularity in the top 50% of births</h3>
<div class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># With boys data from year 2010</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> boys[boys[<span class="st">"year"</span>] <span class="op">==</span> <span class="dv">2010</span>]</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>prop_cumsum <span class="op">=</span> df[<span class="st">"prop"</span>].sort_values(ascending<span class="op">=</span><span class="va">False</span>).cumsum() <span class="co"># To find the position where prop == 0.5</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Top 10 prop sorted:"</span>)</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(prop_cumsum[:<span class="dv">10</span>], <span class="bu">type</span>(prop_cumsum))</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Indices where prop == 0.5:"</span>)</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>prop_cumsum.searchsorted(<span class="fl">0.5</span>) <span class="op">+</span> <span class="dv">1</span> <span class="co"># Indices for prop == 0.5, sort maintained, 1 added due to zero-based index</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a><span class="co"># With the data from year 1900</span></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> boys[boys.year <span class="op">==</span> <span class="dv">1900</span>]</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>in1900 <span class="op">=</span> df.sort_values(<span class="st">"prop"</span>, ascending<span class="op">=</span><span class="va">False</span>).prop.cumsum()</span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>in1900.searchsorted(<span class="fl">0.5</span>) <span class="op">+</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Top 10 prop sorted:
260876    0.011547
260877    0.020938
260878    0.029998
260879    0.038962
260880    0.047860
260881    0.056599
260882    0.065186
260883    0.073454
260884    0.081559
260885    0.089643
Name: prop, dtype: float64 &lt;class 'pandas.core.series.Series'&gt;
Indices where prop == 0.5:</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="14">
<pre><code>25</code></pre>
</div>
</div>
<div class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Apply the operation to each group of sex/year combination from top1000</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>top1000</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_quantile_count(group, q<span class="op">=</span><span class="fl">0.5</span>):</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>  group <span class="op">=</span> group.sort_values(<span class="st">"prop"</span>, ascending<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> group.prop.cumsum().searchsorted(q) <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>diversity <span class="op">=</span> top1000.groupby([<span class="st">"year"</span>, <span class="st">"sex"</span>])</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Check some data from the grouped df.</span></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a><span class="bu">type</span>(diversity)</span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>selected_group <span class="op">=</span> diversity.get_group((<span class="dv">2000</span>, <span class="st">'F'</span>))</span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Selected group - 2000 F: "</span>)</span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(selected_group)</span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Get quantile count fpr prop==0.5 for each group</span></span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>diversity <span class="op">=</span> top1000.groupby([<span class="st">"year"</span>, <span class="st">"sex"</span>]).<span class="bu">apply</span>(get_quantile_count)</span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>diversity</span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a><span class="bu">type</span>(diversity)  <span class="co"># Series</span></span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a>diversity <span class="op">=</span> diversity.unstack()  <span class="co"># unstack, Series --&gt; DF</span></span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true" tabindex="-1"></a><span class="bu">type</span>(diversity)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Selected group - 2000 F: 
           name sex  births  year      prop
239876    Emily   F   25957  2000  0.014295
239877   Hannah   F   23085  2000  0.012713
239878  Madison   F   19968  2000  0.010997
239879   Ashley   F   17998  2000  0.009912
239880    Sarah   F   17712  2000  0.009754
...         ...  ..     ...   ...       ...
240871    Kenia   F     213  2000  0.000117
240872    Maiya   F     213  2000  0.000117
240873   Melisa   F     213  2000  0.000117
240874   Adrian   F     212  2000  0.000117
240875   Marlen   F     212  2000  0.000117

[1000 rows x 5 columns]</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="15">
<pre><code>pandas.core.frame.DataFrame</code></pre>
</div>
</div>
<div class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the Number of popular names in top 50%</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(diversity)</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>diversity.plot(title<span class="op">=</span><span class="st">"Number of popular names in top 50%"</span>)</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>sex     F    M
year          
1880   38   14
1881   38   14
1882   38   15
1883   39   15
1884   39   16
...   ...  ...
2018  259  149
2019  265  155
2020  272  163
2021  276  167
2022  283  173

[143 rows x 2 columns]</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="analysis_us_baby_names_files/figure-html/cell-17-output-2.png" width="575" height="449"></p>
</div>
</div>
<p>The plot displays that girl names, and they have only become more so over time. Further analysis of what exactly is driving the diversity, .ike the increase of alternative spellings, is lfet to the reader.</p>
</section>
<section id="analysis---the-last-letter-revolution" class="level3">
<h3 class="anchored" data-anchor-id="analysis---the-last-letter-revolution">Analysis - The “last letter” revolution</h3>
<p>In 2007, baby name researcher Laura Wattenberg pointed out that the distribution of boy names by final letter has changed significantly over the last 100 years</p>
<div class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Verify the analysis of Lauren Wattenberg</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="co"># boy names, last 100 years, final letter</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Aggregate dataset by year, sex and final letter</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(names)</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(names[<span class="st">"name"</span>])</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_last_letter(x):</span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> x[<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>last_letters <span class="op">=</span> names[<span class="st">"name"</span>].<span class="bu">map</span>(get_last_letter)</span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a>last_letters  <span class="co"># New Series :name" with last letter of names </span></span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a>last_letters.name <span class="op">=</span> <span class="st">"last_letter"</span> <span class="co"># Change Series name tp "last_letter"</span></span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a>last_letters</span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a>table <span class="op">=</span> names.pivot_table(<span class="st">"births"</span>, index<span class="op">=</span>last_letters, columns<span class="op">=</span>[<span class="st">"sex"</span>, <span class="st">"year"</span>], aggfunc<span class="op">=</span><span class="bu">sum</span>)  <span class="co"># Turn names df into a pivot table by last letter with sex/year combo, total births for each last letter</span></span>
<span id="cb28-17"><a href="#cb28-17" aria-hidden="true" tabindex="-1"></a>table</span>
<span id="cb28-18"><a href="#cb28-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-19"><a href="#cb28-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Pick three years to represent 100 years over time, and review some rows. table df has multiple column index of "sex" and "year"</span></span>
<span id="cb28-20"><a href="#cb28-20" aria-hidden="true" tabindex="-1"></a>subtable <span class="op">=</span> table.reindex(columns<span class="op">=</span>[<span class="dv">1910</span>, <span class="dv">1960</span>, <span class="dv">2010</span>], level<span class="op">=</span><span class="st">"year"</span>)</span>
<span id="cb28-21"><a href="#cb28-21" aria-hidden="true" tabindex="-1"></a>subtable.head()</span>
<span id="cb28-22"><a href="#cb28-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-23"><a href="#cb28-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Normalize the table by total births. To compute a new table containing the proprtion of toral births for each sex ending in each letter</span></span>
<span id="cb28-24"><a href="#cb28-24" aria-hidden="true" tabindex="-1"></a>subtable.<span class="bu">sum</span>()</span>
<span id="cb28-25"><a href="#cb28-25" aria-hidden="true" tabindex="-1"></a><span class="bu">type</span>(subtable)  <span class="co"># DF </span></span>
<span id="cb28-26"><a href="#cb28-26" aria-hidden="true" tabindex="-1"></a><span class="bu">type</span>(subtable.<span class="bu">sum</span>())  <span class="co"># Series</span></span>
<span id="cb28-27"><a href="#cb28-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-28"><a href="#cb28-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute last_letter_proportion for each letter grouped by sex and year fpr the three time points</span></span>
<span id="cb28-29"><a href="#cb28-29" aria-hidden="true" tabindex="-1"></a>letter_prop <span class="op">=</span> subtable <span class="op">/</span> subtable.<span class="bu">sum</span>()  <span class="co"># DF / Series</span></span>
<span id="cb28-30"><a href="#cb28-30" aria-hidden="true" tabindex="-1"></a>letter_prop</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>              name sex  births  year      prop
0             Mary   F    7065  1880  0.077642
1             Anna   F    2604  1880  0.028617
2             Emma   F    2003  1880  0.022012
3        Elizabeth   F    1939  1880  0.021309
4           Minnie   F    1746  1880  0.019188
...            ...  ..     ...   ...       ...
2085153     Zuberi   M       5  2022  0.000003
2085154       Zydn   M       5  2022  0.000003
2085155      Zylon   M       5  2022  0.000003
2085156     Zymeer   M       5  2022  0.000003
2085157    Zymeire   M       5  2022  0.000003

[2085158 rows x 5 columns]
0               Mary
1               Anna
2               Emma
3          Elizabeth
4             Minnie
             ...    
2085153       Zuberi
2085154         Zydn
2085155        Zylon
2085156       Zymeer
2085157      Zymeire
Name: name, Length: 2085158, dtype: object</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="17">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th">sex</th>
<th colspan="3" data-quarto-table-cell-role="th" data-halign="left">F</th>
<th colspan="3" data-quarto-table-cell-role="th" data-halign="left">M</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">1910</th>
<th data-quarto-table-cell-role="th">1960</th>
<th data-quarto-table-cell-role="th">2010</th>
<th data-quarto-table-cell-role="th">1910</th>
<th data-quarto-table-cell-role="th">1960</th>
<th data-quarto-table-cell-role="th">2010</th>
</tr>
<tr class="header">
<th data-quarto-table-cell-role="th">last_letter</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">a</td>
<td>0.273388</td>
<td>0.341890</td>
<td>0.381239</td>
<td>0.005031</td>
<td>0.002447</td>
<td>0.015067</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">b</td>
<td>NaN</td>
<td>0.000343</td>
<td>0.000256</td>
<td>0.002116</td>
<td>0.001834</td>
<td>0.020494</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">c</td>
<td>0.000013</td>
<td>0.000024</td>
<td>0.000539</td>
<td>0.002482</td>
<td>0.007250</td>
<td>0.012183</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">d</td>
<td>0.017026</td>
<td>0.001845</td>
<td>0.001489</td>
<td>0.113857</td>
<td>0.122937</td>
<td>0.023394</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">e</td>
<td>0.336943</td>
<td>0.215131</td>
<td>0.178430</td>
<td>0.147599</td>
<td>0.083838</td>
<td>0.067968</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">f</td>
<td>NaN</td>
<td>0.000010</td>
<td>0.000055</td>
<td>0.000783</td>
<td>0.004329</td>
<td>0.001206</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">g</td>
<td>0.000144</td>
<td>0.000156</td>
<td>0.000377</td>
<td>0.002260</td>
<td>0.009488</td>
<td>0.001406</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">h</td>
<td>0.051531</td>
<td>0.036220</td>
<td>0.076011</td>
<td>0.045564</td>
<td>0.037914</td>
<td>0.051828</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">i</td>
<td>0.001526</td>
<td>0.039965</td>
<td>0.031700</td>
<td>0.000844</td>
<td>0.000610</td>
<td>0.022672</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">j</td>
<td>NaN</td>
<td>NaN</td>
<td>0.000093</td>
<td>NaN</td>
<td>NaN</td>
<td>0.000772</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">k</td>
<td>0.000121</td>
<td>0.000155</td>
<td>0.000356</td>
<td>0.036579</td>
<td>0.049374</td>
<td>0.018531</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">l</td>
<td>0.043188</td>
<td>0.033871</td>
<td>0.026391</td>
<td>0.065023</td>
<td>0.104888</td>
<td>0.070455</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">m</td>
<td>0.001200</td>
<td>0.008611</td>
<td>0.002599</td>
<td>0.058046</td>
<td>0.033832</td>
<td>0.024707</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">n</td>
<td>0.079238</td>
<td>0.130680</td>
<td>0.140044</td>
<td>0.143387</td>
<td>0.152510</td>
<td>0.362404</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">o</td>
<td>0.001672</td>
<td>0.002440</td>
<td>0.001247</td>
<td>0.017064</td>
<td>0.012840</td>
<td>0.042558</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">p</td>
<td>0.000018</td>
<td>0.000023</td>
<td>0.000020</td>
<td>0.003172</td>
<td>0.005674</td>
<td>0.001268</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">q</td>
<td>NaN</td>
<td>NaN</td>
<td>0.000030</td>
<td>NaN</td>
<td>NaN</td>
<td>0.000180</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">r</td>
<td>0.013395</td>
<td>0.006765</td>
<td>0.018045</td>
<td>0.064472</td>
<td>0.031050</td>
<td>0.087390</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">s</td>
<td>0.039036</td>
<td>0.012762</td>
<td>0.013336</td>
<td>0.130797</td>
<td>0.102699</td>
<td>0.065160</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">t</td>
<td>0.027432</td>
<td>0.015197</td>
<td>0.007838</td>
<td>0.072885</td>
<td>0.065643</td>
<td>0.022861</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">u</td>
<td>0.000683</td>
<td>0.000574</td>
<td>0.000416</td>
<td>0.000124</td>
<td>0.000057</td>
<td>0.001227</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">v</td>
<td>NaN</td>
<td>0.000060</td>
<td>0.000117</td>
<td>0.000113</td>
<td>0.000036</td>
<td>0.001451</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">w</td>
<td>0.000020</td>
<td>0.000031</td>
<td>0.001190</td>
<td>0.006323</td>
<td>0.007706</td>
<td>0.016183</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">x</td>
<td>0.000015</td>
<td>0.000037</td>
<td>0.000730</td>
<td>0.003965</td>
<td>0.001851</td>
<td>0.008599</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">y</td>
<td>0.110975</td>
<td>0.152551</td>
<td>0.116753</td>
<td>0.077345</td>
<td>0.161011</td>
<td>0.058207</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">z</td>
<td>0.002436</td>
<td>0.000658</td>
<td>0.000700</td>
<td>0.000170</td>
<td>0.000184</td>
<td>0.001829</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Bar plots for each sex, broken down by year</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>letter_prop.head()  <span class="co"># review the data to plot</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>fig, axes <span class="op">=</span> plt.subplots(<span class="dv">2</span>, <span class="dv">1</span>, figsize<span class="op">=</span>(<span class="dv">10</span>,<span class="dv">8</span>))</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>plt.subplots_adjust(hspace<span class="op">=</span><span class="fl">0.7</span>)  <span class="co"># Adjust he spacing between subplots</span></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Male data on the first plot, Female data on the second plot</span></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>letter_prop[<span class="st">"M"</span>].plot(kind<span class="op">=</span><span class="st">"bar"</span>, rot<span class="op">=</span><span class="dv">0</span>, ax<span class="op">=</span>axes[<span class="dv">0</span>], title<span class="op">=</span><span class="st">"Male"</span>)</span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>letter_prop[<span class="st">"F"</span>].plot(kind<span class="op">=</span><span class="st">"bar"</span>, rot<span class="op">=</span><span class="dv">0</span>, ax<span class="op">=</span>axes[<span class="dv">1</span>], title<span class="op">=</span><span class="st">"Female"</span>,legend<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="analysis_us_baby_names_files/figure-html/cell-19-output-1.png" width="802" height="671"></p>
</div>
</div>
<p>Boy names ending in n have experienced significatn growth since the 1960s.</p>
<div class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>table   <span class="co"># original table</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="bu">type</span>(table)</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>table.index</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>s <span class="op">=</span> table.<span class="bu">sum</span>()  <span class="co"># Normalized Series, sum of births for all letters per sex/year combo</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>s.index</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>s</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>letter_group <span class="op">=</span> table <span class="op">/</span> table.<span class="bu">sum</span>()  <span class="co"># DF / Serieis </span></span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>letter_group</span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>dny_ts <span class="op">=</span> letter_group.loc[[<span class="st">"d"</span>,<span class="st">"n"</span>,<span class="st">"y"</span>], <span class="st">"M"</span>].T  <span class="co"># Transpose</span></span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a><span class="bu">type</span>(dny_ts)</span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a>dny_ts</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="19">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th">last_letter</th>
<th data-quarto-table-cell-role="th">d</th>
<th data-quarto-table-cell-role="th">n</th>
<th data-quarto-table-cell-role="th">y</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1880</td>
<td>0.083057</td>
<td>0.153217</td>
<td>0.075763</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1881</td>
<td>0.083246</td>
<td>0.153221</td>
<td>0.077459</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1882</td>
<td>0.085332</td>
<td>0.149561</td>
<td>0.077538</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1883</td>
<td>0.084053</td>
<td>0.151656</td>
<td>0.079149</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1884</td>
<td>0.086122</td>
<td>0.149927</td>
<td>0.080408</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2018</td>
<td>0.023095</td>
<td>0.333490</td>
<td>0.048823</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2019</td>
<td>0.022800</td>
<td>0.323724</td>
<td>0.048088</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2020</td>
<td>0.022618</td>
<td>0.314561</td>
<td>0.047809</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2021</td>
<td>0.022628</td>
<td>0.306184</td>
<td>0.047655</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2022</td>
<td>0.022563</td>
<td>0.296986</td>
<td>0.047495</td>
</tr>
</tbody>
</table>

<p>143 rows × 3 columns</p>
</div>
</div>
</div>
<div class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot with three ending letters over time - d, n, y</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>plt.clf()</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>dny_ts.plot()</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>&lt;Figure size 672x480 with 0 Axes&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="analysis_us_baby_names_files/figure-html/cell-21-output-2.png" width="579" height="429"></p>
</div>
</div>
</section>
<section id="analysis---boy-names-that-became-girl-names-and-vice-versa" class="level3">
<h3 class="anchored" data-anchor-id="analysis---boy-names-that-became-girl-names-and-vice-versa">Analysis - Boy names that became girl names (and vice versa)</h3>
<p>Examine the trend of popular names with one gender eariler but have become preferred as a name for the other gender over time. - i.e Lesley / Leslie</p>
<div class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Work with top1000 DF, name starting with "Lesl"</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Review top1000</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>top1000</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute a list of names occurring in the dataset starting with "Lesl"</span></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>all_names <span class="op">=</span> pd.Series(top1000[<span class="st">"name"</span>].unique())  <span class="co"># Series of unique names</span></span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>all_names</span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>lesley_like <span class="op">=</span> all_names[all_names.<span class="bu">str</span>.contains(<span class="st">"Lesl"</span>)]</span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a>lesley_like</span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter the top1000 to the list of narrowed names, total count for each name</span></span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a>filtered <span class="op">=</span> top1000[top1000[<span class="st">"name"</span>].isin(lesley_like)]</span>
<span id="cb34-14"><a href="#cb34-14" aria-hidden="true" tabindex="-1"></a>filtered</span>
<span id="cb34-15"><a href="#cb34-15" aria-hidden="true" tabindex="-1"></a>filtered.groupby(<span class="st">"name"</span>)[<span class="st">"births"</span>].<span class="bu">sum</span>()</span>
<span id="cb34-16"><a href="#cb34-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-17"><a href="#cb34-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Aggregate by sex and year</span></span>
<span id="cb34-18"><a href="#cb34-18" aria-hidden="true" tabindex="-1"></a>table <span class="op">=</span> filtered.pivot_table(<span class="st">"births"</span>, index<span class="op">=</span><span class="st">"year"</span>, columns<span class="op">=</span><span class="st">"sex"</span>, aggfunc<span class="op">=</span><span class="st">"sum"</span>)</span>
<span id="cb34-19"><a href="#cb34-19" aria-hidden="true" tabindex="-1"></a>table</span>
<span id="cb34-20"><a href="#cb34-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-21"><a href="#cb34-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Then normalize the aggregated data (row-wise normalization)</span></span>
<span id="cb34-22"><a href="#cb34-22" aria-hidden="true" tabindex="-1"></a>table.<span class="bu">sum</span>(axis<span class="op">=</span><span class="st">"columns"</span>) <span class="co"># row sum</span></span>
<span id="cb34-23"><a href="#cb34-23" aria-hidden="true" tabindex="-1"></a>table <span class="op">=</span> table.div(table.<span class="bu">sum</span>(axis<span class="op">=</span><span class="st">"columns"</span>), axis<span class="op">=</span><span class="st">"index"</span>) <span class="co"># divide each element in a row by its corresponding row sum</span></span>
<span id="cb34-24"><a href="#cb34-24" aria-hidden="true" tabindex="-1"></a>table</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="21">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th">sex</th>
<th data-quarto-table-cell-role="th">F</th>
<th data-quarto-table-cell-role="th">M</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1880</td>
<td>0.091954</td>
<td>0.908046</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1881</td>
<td>0.106796</td>
<td>0.893204</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1882</td>
<td>0.065693</td>
<td>0.934307</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1883</td>
<td>0.053030</td>
<td>0.946970</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1884</td>
<td>0.107143</td>
<td>0.892857</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2018</td>
<td>1.000000</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2019</td>
<td>1.000000</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2020</td>
<td>1.000000</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2021</td>
<td>1.000000</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2022</td>
<td>1.000000</td>
<td>NaN</td>
</tr>
</tbody>
</table>

<p>143 rows × 2 columns</p>
</div>
</div>
</div>
</section>
<section id="data-normalization" class="level3">
<h3 class="anchored" data-anchor-id="data-normalization">Data Normalization</h3>
<p>Normalization in the context of data typically refers to the process of scaling and transforming data into a standard formt, making it more consistent and comparable. This is crucial in data analysis and machine learning for several reasons:</p>
<ol type="1">
<li><p>Scale Consistency:</p>
<p>Normalization ensures that all variables have the ame scale. It is important when working with algorithms that are sensitive to the scale of the input features, such as gradient-based optimization algorithms in machine leraning</p></li>
<li><p>Comparability:</p>
<p>Normalizing data allows for meaninful comparisons between different variables.</p></li>
<li><p>Convergene Speed:</p>
<p>Some optimization algorithms converge faster when the input features are on a similar scale. Normalzation ca speed up the convergence of iterative optimization algorithms.</p></li>
<li><p>Interpretability:</p>
<p>Normalized data is often easeir to interpret. The coefficients in linear models, for example, represetn the change in the dependent variable for a one-unit change in the independent variable. Normalization ensures that this change is consistent across variables.</p></li>
<li><p>Handling Outliers:</p>
<p>Normalization can mitigate the ipact of outliers. When data has extreme values, normalization techiques can make the analysis less sensitive to these outliers.</p></li>
</ol>
<ul>
<li><strong>Min-Max Scaling</strong>: Scake the data to a specific range(e.g.&nbsp;between 0 and 1)</li>
</ul>
<div class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.preprocessing <span class="im">import</span> MinMaxScaler</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Sample data</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> {<span class="st">'feature1'</span>: [<span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">30</span>, <span class="dv">40</span>, <span class="dv">50</span>]}</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame(data)</span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Min-Max Scaling</span></span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a>scaler <span class="op">=</span> MinMaxScaler()</span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>normalized_data <span class="op">=</span> scaler.fit_transform(df)</span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a>df_normalized <span class="op">=</span> pd.DataFrame(normalized_data, columns<span class="op">=</span>df.columns)</span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Original Data:"</span>)</span>
<span id="cb35-14"><a href="#cb35-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df)</span>
<span id="cb35-15"><a href="#cb35-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Min-Max Scaled Data:"</span>)</span>
<span id="cb35-16"><a href="#cb35-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df_normalized)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Original Data:
   feature1
0        10
1        20
2        30
3        40
4        50

Min-Max Scaled Data:
   feature1
0      0.00
1      0.25
2      0.50
3      0.75
4      1.00</code></pre>
</div>
</div>
<ul>
<li><strong>Z-score Standardization</strong>: Scales the data to have a mean of 0 and a standard deviation of</li>
</ul>
<div class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.preprocessing <span class="im">import</span> StandardScaler</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Sample data</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> {<span class="st">'feature1'</span>: [<span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">30</span>, <span class="dv">40</span>, <span class="dv">50</span>]}</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame(data)</span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Z-score Standardization</span></span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>scaler <span class="op">=</span> StandardScaler()</span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a>standardized_data <span class="op">=</span> scaler.fit_transform(df)</span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a>df_standardized <span class="op">=</span> pd.DataFrame(standardized_data, columns<span class="op">=</span>df.columns)</span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Original Data:"</span>)</span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df)</span>
<span id="cb37-15"><a href="#cb37-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Z-score Standardized Data:"</span>)</span>
<span id="cb37-16"><a href="#cb37-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df_standardized)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Original Data:
   feature1
0        10
1        20
2        30
3        40
4        50

Z-score Standardized Data:
   feature1
0 -1.414214
1 -0.707107
2  0.000000
3  0.707107
4  1.414214</code></pre>
</div>
</div>
<ul>
<li><strong>Decimal Scaling</strong>: Shift the decimal point of values to achieve normalization.</li>
</ul>
<div class="cell" data-execution_count="24">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Sample data</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> {<span class="st">'feature1'</span>: [<span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">30</span>, <span class="dv">40</span>, <span class="dv">50</span>]}</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame(data)</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Decimal Scaling</span></span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'feature1'</span>].<span class="bu">max</span>()</span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a><span class="op">-</span><span class="bu">len</span>(<span class="bu">str</span>(df[<span class="st">'feature1'</span>].<span class="bu">max</span>()))</span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span><span class="op">**</span>(<span class="op">-</span><span class="bu">len</span>(<span class="bu">str</span>(df[<span class="st">'feature1'</span>].<span class="bu">max</span>())))</span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a>decimal_scaling_factor <span class="op">=</span> <span class="dv">10</span><span class="op">**</span>(<span class="op">-</span><span class="bu">len</span>(<span class="bu">str</span>(df[<span class="st">'feature1'</span>].<span class="bu">max</span>())))</span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a>df_decimal_scaled <span class="op">=</span> df <span class="op">*</span> decimal_scaling_factor</span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Original Data:"</span>)</span>
<span id="cb39-15"><a href="#cb39-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df)</span>
<span id="cb39-16"><a href="#cb39-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Decimal Scaled Data:"</span>)</span>
<span id="cb39-17"><a href="#cb39-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df_decimal_scaled)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Original Data:
   feature1
0        10
1        20
2        30
3        40
4        50

Decimal Scaled Data:
   feature1
0       0.1
1       0.2
2       0.3
3       0.4
4       0.5</code></pre>
</div>
</div>
<ul>
<li>Log Transformation: Applies the logarithmic function to reduce the impact of large values.</li>
</ul>
<div class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Sample data</span></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> {<span class="st">'feature1'</span>: [<span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">30</span>, <span class="dv">40</span>, <span class="dv">50</span>]}</span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame(data)</span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Log Transformation (applies natural logarithm (base e) to each elementin the df after adding 1 to each element, technique avoiding issues with talking the logarithm of zero.)</span></span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>df_log_transformed <span class="op">=</span> np.log1p(df)</span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Original Data:"</span>)</span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df)</span>
<span id="cb41-13"><a href="#cb41-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Log Transformed Data:"</span>)</span>
<span id="cb41-14"><a href="#cb41-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df_log_transformed)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Original Data:
   feature1
0        10
1        20
2        30
3        40
4        50

Log Transformed Data:
   feature1
0  2.397895
1  3.044522
2  3.433987
3  3.713572
4  3.931826</code></pre>
</div>
</div>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">Copyright 2023, Albert Joonyoung Park.</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/">
      <i class="bi bi-twitter" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>



</body></html>